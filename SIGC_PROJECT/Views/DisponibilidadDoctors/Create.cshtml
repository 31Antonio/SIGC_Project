@model SIGC_PROJECT.Models.ViewModel.DisponibilidadDocVM
@using SIGC_PROJECT.Helper;

@{
    ViewData["Title"] = "Create";
}

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-11">
            <div class="card-header text-center">
                <h2 style="font-weight: bold; font-size: 1.7em; color: #04294F;">Registro del horario</h2>
            </div>

            <div class="card-body">
                <form asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <input asp-for="DoctorId" hidden />

                    <div class="form-group select_todo">
                        <input type="checkbox" id="seleccionarTodo" /> Seleccionar todos los días
                    </div>

                    @foreach (var dia in Model.Dias.Keys)
                    {
                        <div class="form-group row mb-3 day-group">
                            <div class="col-auto form-check">
                                <input type="checkbox" class="form-check-input day-checkbox" name="selectedDays" value="@dia" id="@dia" />
                                <label class="form-check-label day-label" for="@dia">@dia</label>
                            </div>

                            <div class="col-auto time-fields ml-5" style="display: none;">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="HoraInicio_@dia">Hora Inicio</label>
                                        <input type="time" id="HoraInicio_@dia" name="HoraInicio_@dia" class="form-control" />
                                    </div>

                                    <div class="col-md-6">
                                        <label for="HoraFin_@dia">Hora Fin</label>
                                        <input type="time" id="HoraFin_@dia" name="HoraFin_@dia" class="form-control" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    }

                    <div class="form-group mt-5 text-center">
                        <input type="submit" value="Crear" class="btn btn-estilo" />
                        <a asp-action="Index" class="btn btn-danger font-weight-bold">Cancelar</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    @*======== FUNCIONALIDADES =======*@
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const selectAll_chk = document.getElementById("seleccionarTodo");
            const chk_dias = document.querySelectorAll('.day-checkbox');
            const group_dias = document.querySelectorAll(".day-group");

            selectAll_chk.addEventListener('change', function () {
                chk_dias.forEach(function (checkbox) {
                    checkbox.checked = selectAll_chk.checked;
                    toogleCampos(checkbox)
                });
            });

            chk_dias.forEach(function (checkbox) {
                checkbox.addEventListener('change', function () {
                    toogleCampos(checkbox)
                });
            });

            function toogleCampos(checkbox) {
                const camposHoras = checkbox.closest('.day-group').querySelector('.time-fields');

                if (checkbox.checked) {
                    camposHoras.style.display = 'block';
                } else {
                    camposHoras.style.display = 'none';
                }
            }

        });


    </script>
    @*================================*@

    @*======== ESTILOS ========*@
    <style>
        .day-group { 
            background-color: #ffffff;
            color: #000000;
            font-size: 1.3em;
            font-weight: bold;
            padding: 10px;
            margin-left: 2px;
        }

        .day-label {
            width: 100px;
            display: inline-block;
        }

        .select_todo {
            color: #000000;
            font-size: 1.3em;
            font-weight: bold;
            padding: 10px;
        }

        .btn-estilo {
            background-color: rgba(42, 62, 84, 1);
            color: #FFFFFF;
            font-weight: bold;
            transition: background-color 0.3s linear;
        }

        .btn-estilo:hover {
            background-color: rgba(42, 62, 84, 0.8);
            color: #FFFFFF;
        }

    </style>
    @*=========================*@
}
